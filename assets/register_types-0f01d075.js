var p=Object.defineProperty;var w=(s,e,t)=>e in s?p(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var u=(s,e,t)=>(w(s,typeof e!="symbol"?e+"":e,t),t);import{serializable as n,Behaviour as x,TypeStore as f}from"./needle-engine-c7aa0ab6.js";import{O as g,S as b,M as d,a as c,C as I,b as M,c as m}from"./three.module-aeda4e36.js";import"./index-2638d445.js";var T=Object.defineProperty,y=Object.getOwnPropertyDescriptor,a=(s,e,t,i)=>{for(var o=i>1?void 0:i?y(e,t):e,h=s.length-1,l;h>=0;h--)(l=s[h])&&(o=(i?l(e,t,o):l(o))||o);return i&&o&&T(e,t,o),o};class r extends x{constructor(){super(...arguments),this.glasses=[],this.headgear=[],this.footwear=[],this.currentGlassesIndex=0,this.currentHeadgearIndex=0,this.currentFootwearIndex=0,this.direction=null,this.bun=null,this.title=null,this.baseColorTextures=[],this.currentTextureIndex=0,this.skyboxTintColors=[],this.currentSkyboxColorIndex=0,this.saturationMultiplier=1.2}start(){this.glasses.length>0&&(this.glasses[this.currentGlassesIndex].visible=!0),this.headgear.length>0&&(this.headgear[this.currentHeadgearIndex].visible=!0),this.footwear.length>0&&(this.footwear[this.currentFootwearIndex].visible=!0)}switchItems(){this.switchGlasses(),this.switchHats(),this.switchFootwear(),this.switchBunTexture()}switchGlasses(){if(this.glasses.length===0)return;this.glasses[this.currentGlassesIndex].visible=!1;let e;do e=Math.floor(Math.random()*this.glasses.length);while(e===this.currentGlassesIndex);this.currentGlassesIndex=e,this.glasses[this.currentGlassesIndex].visible=!0}switchHats(){if(this.headgear.length===0)return;this.headgear[this.currentHeadgearIndex].visible=!1;let e;do e=Math.floor(Math.random()*this.headgear.length);while(e===this.currentHeadgearIndex);this.currentHeadgearIndex=e,this.headgear[this.currentHeadgearIndex].visible=!0}switchFootwear(){if(this.footwear.length===0)return;this.footwear[this.currentFootwearIndex].visible=!1;let e;do e=Math.floor(Math.random()*this.footwear.length);while(e===this.currentFootwearIndex);this.currentFootwearIndex=e,this.footwear[this.currentFootwearIndex].visible=!0}switchBunTexture(){if(this.baseColorTextures.length===0||!this.bun)return;let e;do e=Math.floor(Math.random()*this.baseColorTextures.length);while(e===this.currentTextureIndex);this.currentTextureIndex=e,this.setBunTexture(this.baseColorTextures[this.currentTextureIndex])}setBunTexture(e){if(e.colorSpace=b,this.bun!==null){const t=this.getMaterial(this.bun);Array.isArray(t)?t.forEach(i=>{(i instanceof d||i instanceof c)&&(i.map=e,i.needsUpdate=!0)}):t&&(t instanceof d||t instanceof c)&&(t.map=e,t.needsUpdate=!0)}}setSkyboxTintColor(e){if(this.context.scene.background instanceof I)this.context.scene.background.set(e);else if(this.context.scene.background instanceof M){const t=this.context.scene.background;t&&t.color&&(t.color.set(e),t.needsUpdate=!0)}}getMaterial(e){return e instanceof m&&e.material||null}}a([n()],r.prototype,"glasses",2);a([n()],r.prototype,"headgear",2);a([n()],r.prototype,"footwear",2);a([n()],r.prototype,"direction",2);a([n(g)],r.prototype,"bun",2);a([n(g)],r.prototype,"title",2);a([n()],r.prototype,"baseColorTextures",2);a([n()],r.prototype,"skyboxTintColors",2);a([n()],r.prototype,"saturationMultiplier",2);f.add("ClothesSwitcherTS",r);class v extends x{constructor(){super();u(this,"index",0);u(this,"animator")}start(){}update(){}indexUp(){this.index++,this.animator.setInteger("Index",this.index)}indexDown(){this.index--,this.animator.setInteger("Index",this.index)}}f.add("Animindex",v);
